@using Microsoft.AspNet.Identity
@using ToDoList.Models
@using ToDoList.ViewModels

@{
    ViewBag.Title = "Index";
}
@{
    Html.RenderAction("GetGroups","Home");
}

<div class="panel panel-default">
    <div class="panel-body">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    @{
                        Html.RenderPartial($"_AddTaskPartial", new TaskViewModel()
                        {
                            TaskId = 0,
                            Closed = false,
                            Title = "",
                            TaskPriority = Priority.None,
                        });
                    }
                </div>
            </div>
            <div class="row">
             <div class="col-lg-8">
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane fade in active" id="panel_1">
                            @{
                                Html.RenderAction("Tasks", "Home", new { groupid = 1 });
                            }
                    </div>
                    <div role="tabpanel" class="tab-pane fade" id="panel_2">                        
                            @{
                                Html.RenderAction("Tasks", "Home", new { groupid = 2 });
                            }                        
                    </div>
                    <div role="tabpanel" class="tab-pane fade" id="panel_3">                       
                            @{
                                Html.RenderAction("Tasks", "Home", new { groupid = 3 });
                            }                        
                    </div>
                    <div role="tabpanel" class="tab-pane fade" id="panel_4">
                            @{
                                Html.RenderAction("Tasks", "Home", new { groupid = 4 });
                            }
                    </div>
                </div>
            </div>              
                <div class="col-lg-4">
                    @Html.Partial("Edit", new TaskViewModel() {Comments = new List<CommentViewModel>()})
                    @{Html.RenderPartial("EditPost", new TaskViewModel());}
                </div>
            </div>
        </div>
    </div>
    </div>
    @section scripts
{
        <script>
            function OnClick() {
                $.post("/home/add/",
                             { "Title": $("#Title").val() })
                         .done(function () {
                             $(".js-btn-add").removeClass("btn-primary").addClass("btn-success");
                         });

            }
            $(document).ready(function () {
                $("#edit").hide();
                $("#view").hide();

            });
            $(document).ready(function () {
                $(".CheckEdit").click(function (e) {
                    var id = $(e.target).attr("id");
                    var boxes = $(".CheckEdit");
                    for (var i = 0; i < boxes.length; i++) {
                        var _id = "#" + (i + 1);
                        $(_id).prop("checked", false);
                        if (i + 1 == id)
                            $(_id).prop("checked", true);
                    }
                    $("#view").show();
                    $("#edit").hide();
                    $.ajax({
                        url: 'Home/Edit?id=' + id,
                        dataType: "text",
                        type: "GET",
                        success: function (data) {
                            $("#view").html(data);
                            $(".comments").css("display", "none");
                        }

                    });

                });

            });
            function btnClick() {
                var id = $("#taskID").val();
                $("#view").hide();
                $("#edit").show();
                $.ajax({
                    url: 'Home/Edit?id=' + id + '&act=edit',
                    dataType: "text",
                    type: "GET",
                    success: function (data) {

                        $("#edit").html(data);
                    }
                });
                return true;
            }
            $("#Cancel").click(function () {
                $("#view").show();
                $("#edit").hide();
            });
            function btnShow() {
                $(".comments").css("display", "block");
            } function btnHide() {
                $(".comments").css("display", "none");
            }

        </script>
    }
